<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>The Ada Program: main.adb</title>
<!-- Automatically created by 'sgml2html'. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
  .key         {font-weight:bold; color:#228B22;}
  .comment     {font-style:oblique; font-weight:bold; color:#BB1212;}
  .linenumber  {font-size:75%;    color:#888888;}
  .string      {color:#3333CC;}
  .char        {color:#3333CC;}
  .number      {color:#3333CC;}
  .predefined  {color:#3333CC;}
</style>
</head>
<body>
<h1>The Ada Program: main.adb</h1>
<pre>
<span class="linenumber">  1</span> <span class="comment">--  main.adb: illustrate OO programming, dynamic dispatch, narrowing</span>
<span class="linenumber">  2</span> 
<span class="linenumber">  3</span> <span class="key">with</span> Objects, Shapes; <span class="key">use</span> Objects, Shapes;
<span class="linenumber">  4</span> <span class="key">with</span> <a href="http://www.adahome.com/rm95/rm9x-A-10-01.html">Ada.Text_IO</a>, <a href="http://www.adahome.com/rm95/rm9x-A-10-09.html#32">Ada.Float_Text_IO</a>; <span class="key">use</span> Ada;
<span class="linenumber">  5</span> 
<span class="linenumber">  6</span> <span class="key">procedure</span> Main <span class="key">is</span>
<span class="linenumber">  7</span> 
<span class="linenumber">  8</span>    O: Object;
<span class="linenumber">  9</span>    P: Point  := Point' (X=&#62;<span class="number">1.0</span>, Y=&#62;<span class="number">2.0</span>);
<span class="linenumber"> 10</span>    C: Circle := Circle'(X=&#62;<span class="number">0.0</span>, Y=&#62;<span class="number">0.0</span>, Radius=&#62;<span class="number">34.7</span>);
<span class="linenumber"> 11</span>    R: Rectangle := Rectangle'(X=&#62;<span class="number">0.0</span>, Y=&#62;<span class="number">0.0</span>, Opposite_Corner=&#62;
<span class="linenumber"> 12</span>           Object'(X=&#62;<span class="number">1.0</span>, Y=&#62;<span class="number">1.0</span>));
<span class="linenumber"> 13</span> 
<span class="linenumber"> 14</span>    <span class="key">type</span> Pointer <span class="key">is</span> <span class="key">access</span> Object<span class="predefined">'Class</span>;
<span class="linenumber"> 15</span>    X: Pointer := <span class="key">new</span> Circle'(C);
<span class="linenumber"> 16</span> 
<span class="linenumber"> 17</span> <span class="key">begin</span>
<span class="linenumber"> 18</span> 
<span class="linenumber"> 19</span>    O := Object (C);
<span class="linenumber"> 20</span>    C := (O <span class="key">with</span> Radius =&#62; <span class="number">41.2</span>);
<span class="linenumber"> 21</span> 
<span class="linenumber"> 22</span>    Float_Text_IO.Put (Distance (P));  <span class="comment">-- Point inherits Distance</span>
<span class="linenumber"> 23</span>    Float_Text_IO.Put (Distance (C));  <span class="comment">-- so does Circle</span>
<span class="linenumber"> 24</span> 
<span class="linenumber"> 25</span>    Float_Text_IO.Put (Area (C));      <span class="comment">-- Circle overrides Area</span>
<span class="linenumber"> 26</span>    Float_Text_IO.Put (Area (R));      <span class="comment">-- so does Rectangle</span>
<span class="linenumber"> 27</span> 
<span class="linenumber"> 28</span>    Float_Text_IO.Put (Area (X.<span class="key">all</span>));  <span class="comment">-- Dynamic dispatching</span>
<span class="linenumber"> 29</span>    Float_Text_IO.Put (Circumference (Circle (X.<span class="key">all</span>))); <span class="comment">-- Narrowing</span>
<span class="linenumber"> 30</span> 
<span class="linenumber"> 31</span> <span class="key">end</span> Main;
</pre>
</body>
</html>
