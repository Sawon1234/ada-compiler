<html>
<head>
<title>The Ada Program: machine_inventory-find_machine.adb</title>
<!-- Automatically created by 'sgml2html'. -->
</head>
<body>
<h1>The Ada Program: machine_inventory-find_machine.adb</h1>
<pre>
<font size=-1>  1</font> <b><font color=#228B22>separate</font></b> (Machine_Inventory)
<font size=-1>  2</font> 
<font size=-1>  3</font> <b><i><font color=#BB1212>-- This procedure searches the inventory file for a machine record for</font></i></b>
<font size=-1>  4</font> <b><i><font color=#BB1212>-- the given ID.</font></i></b>
<font size=-1>  5</font> 
<font size=-1>  6</font> <b><font color=#228B22>procedure</font></b> Find_Machine
<font size=-1>  7</font>       (File    : <b><font color=#228B22>in</font></b> <b><font color=#228B22>out</font></b> Machine_IO.File_Type; <b><i><font color=#BB1212>-- Inventory File</font></i></b>
<font size=-1>  8</font>        ID      : <b><font color=#228B22>in</font></b>     <font color=#8B008B>Natural</font>;              <b><i><font color=#BB1212>-- ID of desired record</font></i></b>
<font size=-1>  9</font>        Machine :    <b><font color=#228B22>out</font></b> Machine_Rec;          <b><i><font color=#BB1212>-- The machine record</font></i></b>
<font size=-1> 10</font>        Found   :    <b><font color=#228B22>out</font></b> <font color=#8B008B>Boolean</font>;              <b><i><font color=#BB1212>-- True if record found</font></i></b>
<font size=-1> 11</font>        Index   :    <b><font color=#228B22>out</font></b> Machine_IO.Count) <b><font color=#228B22>is</font></b>  <b><i><font color=#BB1212>-- The file index of the record</font></i></b>
<font size=-1> 12</font> 
<font size=-1> 13</font>    Info         : Machine_Rec;       <b><i><font color=#BB1212>-- Local copy of a machine record</font></i></b>
<font size=-1> 14</font>    Record_Found : <font color=#8B008B>Boolean</font>;           <b><i><font color=#BB1212>-- Flag for ID search</font></i></b>
<font size=-1> 15</font>    File_Index   : <font color=#8B008B>Natural</font>;           <b><i><font color=#BB1212>-- Iteration counter, also used as</font></i></b>
<font size=-1> 16</font>                                      <b><i><font color=#BB1212>-- an index for the inventory file</font></i></b>
<font size=-1> 17</font> 
<font size=-1> 18</font> <b><font color=#228B22>begin</font></b>   <b><i><font color=#BB1212>-- Find Machine</font></i></b>
<font size=-1> 19</font>    <b><i><font color=#BB1212>-- Start at the beginning of the file and look at each component</font></i></b>
<font size=-1> 20</font>    <b><i><font color=#BB1212>-- until we find the one we want or we reach the end of the file</font></i></b>
<font size=-1> 21</font>    File_Index   := <font color=#008B8B>0</font>;                 <b><i><font color=#BB1212>-- Initialize the iteration counter</font></i></b>
<font size=-1> 22</font>    Record_Found := <font color=#8B008B>False</font>;             <b><i><font color=#BB1212>-- Initialize the loop control variable</font></i></b>
<font size=-1> 23</font>    Machine_IO.Set_Index (File =&#62; File, To =&#62; <font color=#008B8B>1</font>);
<font size=-1> 24</font>    Search_Loop:  <b><i><font color=#BB1212>-- Each iteration, one machine ID is checked</font></i></b>
<font size=-1> 25</font>    <b><font color=#228B22>loop</font></b>
<font size=-1> 26</font>       <b><font color=#228B22>exit</font></b> Search_Loop <b><font color=#228B22>when</font></b> Record_Found <b><font color=#228B22>or</font></b> Machine_IO.End_Of_File (File);
<font size=-1> 27</font>       File_Index := File_Index + <font color=#008B8B>1</font>;
<font size=-1> 28</font>       Machine_IO.Read (File =&#62; File, Item =&#62; Info);
<font size=-1> 29</font>       Record_Found := Info.ID_Number=ID;
<font size=-1> 30</font>    <b><font color=#228B22>end</font></b> <b><font color=#228B22>loop</font></b> Search_Loop;
<font size=-1> 31</font> 
<font size=-1> 32</font>    <b><i><font color=#BB1212>-- Copy local values into out parameters</font></i></b>
<font size=-1> 33</font>    Machine := Info;
<font size=-1> 34</font>    Found   := Record_Found;
<font size=-1> 35</font>    Index   := Machine_IO.Count (File_Index);  <b><i><font color=#BB1212>-- Iteration counter is index</font></i></b>
<font size=-1> 36</font> <b><font color=#228B22>end</font></b> Find_Machine;
</pre>
</body>
</html>
