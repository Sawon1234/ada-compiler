<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>The Ada Program: main.adb</title>
<!-- Automatically created by 'sgml2html'. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
  .key         {font-weight:bold; color:#228B22;}
  .comment     {font-style:oblique; font-weight:bold; color:#BB1212;}
  .linenumber  {font-size:75%;    color:#888888;}
  .string      {color:#3333CC;}
  .char        {color:#3333CC;}
  .number      {color:#3333CC;}
  .predefined  {color:#3333CC;}
</style>
</head>
<body>
<h1>The Ada Program: main.adb</h1>
<pre>
<span class="linenumber">  1</span> <span class="comment">--  main.adb:  use binary search to find command-line arg in word list</span>
<span class="linenumber">  2</span> <span class="key">with</span>
<span class="linenumber">  3</span>   <a href="http://www.adahome.com/rm95/rm9x-A-04-04.html">Ada.Strings.Bounded</a>,  <span class="comment">-- bounded-string type (Ada95 A.4.4)</span>
<span class="linenumber">  4</span>   <a href="http://www.adahome.com/rm95/rm9x-A-15.html">Ada.Command_Line</a>,     <span class="comment">-- access to external execution env (Ada95 A.15)</span>
<span class="linenumber">  5</span>   <a href="http://www.adahome.com/rm95/rm9x-A-10-08.html#20">Ada.Integer_Text_IO</a>,  <span class="comment">-- preinstantiated generic for Integer IO</span>
<span class="linenumber">  6</span>   <a href="http://www.adahome.com/rm95/rm9x-A-10-01.html">Ada.Text_IO</a>;
<span class="linenumber">  7</span> <span class="key">use</span> Ada;
<span class="linenumber">  8</span> 
<span class="linenumber">  9</span> <span class="key">procedure</span> Main <span class="key">is</span>
<span class="linenumber"> 10</span>    <span class="key">package</span> String_25 <span class="key">is</span> <span class="key">new</span> Strings.Bounded.Generic_Bounded_Length (<span class="number">25</span>);
<span class="linenumber"> 11</span> 
<span class="linenumber"> 12</span>    <span class="key">type</span> Word_List <span class="key">is</span> <span class="key">array</span> (<span class="predefined">Positive</span> <span class="key">range</span> &#60;&#62;) <span class="key">of</span> String_25.Bounded_String;
<span class="linenumber"> 13</span>    Max_Number_Of_Words : <span class="key">constant</span> := <span class="number">100</span>;
<span class="linenumber"> 14</span>    List                : Word_List (<span class="number">1</span> .. Max_Number_Of_Words);
<span class="linenumber"> 15</span>    Number_Of_Words     : <span class="predefined">Integer</span> <span class="key">range</span> <span class="number">0</span> .. Max_Number_Of_Words := <span class="number">0</span>;
<span class="linenumber"> 16</span> 
<span class="linenumber"> 17</span>    <span class="key">procedure</span> Binary_Search (List : <span class="key">in</span> Word_List; Value : <span class="key">in</span> <span class="predefined">String</span>;
<span class="linenumber"> 18</span>                             Location : <span class="key">out</span> <span class="predefined">Natural</span>) <span class="key">is</span> <span class="key">separate</span>;
<span class="linenumber"> 19</span> 
<span class="linenumber"> 20</span>    Location : <span class="predefined">Natural</span>;        <span class="comment">-- index of value in "List"</span>
<span class="linenumber"> 21</span>    C        : <span class="key">constant</span> <span class="predefined">Natural</span> := Command_Line.Argument_Count;
<span class="linenumber"> 22</span>    Line     : <span class="predefined">String</span> (<span class="number">1</span> .. <span class="number">100</span>);
<span class="linenumber"> 23</span>    Length   : <span class="predefined">Integer</span>;
<span class="linenumber"> 24</span> 
<span class="linenumber"> 25</span> <span class="key">begin</span>
<span class="linenumber"> 26</span>    <span class="comment">--  read and keep all words from standard input</span>
<span class="linenumber"> 27</span>    <span class="key">while</span> <span class="key">not</span> (Text_IO.End_Of_File) <span class="key">loop</span>
<span class="linenumber"> 28</span>       Text_IO.Get_Line (Line, Length);
<span class="linenumber"> 29</span>       Number_Of_Words := Number_Of_Words + <span class="number">1</span>;
<span class="linenumber"> 30</span>       List (Number_Of_Words) :=
<span class="linenumber"> 31</span>          String_25.To_Bounded_String (Line (<span class="number">1</span> .. Length));
<span class="linenumber"> 32</span>    <span class="key">end</span> <span class="key">loop</span>;
<span class="linenumber"> 33</span> 
<span class="linenumber"> 34</span>    <span class="comment">--  search the list for each word in command line</span>
<span class="linenumber"> 35</span>    <span class="key">for</span> I <span class="key">in</span> <span class="number">1</span> .. C <span class="key">loop</span>
<span class="linenumber"> 36</span>       Binary_Search (List (<span class="number">1</span> .. Number_Of_Words),
<span class="linenumber"> 37</span>                      Command_Line.Argument (I), Location);
<span class="linenumber"> 38</span>       Text_IO.Put (<span class="string">"Searching for "</span><span class="string">""</span> &#38; Command_Line.Argument (I) &#38; <span class="string">""</span><span class="string">".  "</span>);
<span class="linenumber"> 39</span>       <span class="key">if</span> Location /= <span class="number">0</span> <span class="key">then</span>
<span class="linenumber"> 40</span>          Text_IO.Put (<span class="string">"Found at location "</span>);
<span class="linenumber"> 41</span>          Integer_Text_IO.Put (Location, Width =&#62; <span class="number">2</span>);
<span class="linenumber"> 42</span>          Text_IO.Put_Line (<span class="string">"."</span>);
<span class="linenumber"> 43</span>       <span class="key">else</span>
<span class="linenumber"> 44</span>          Text_IO.Put_Line (<span class="string">"Not found in list."</span>);
<span class="linenumber"> 45</span>       <span class="key">end</span> <span class="key">if</span>;
<span class="linenumber"> 46</span>    <span class="key">end</span> <span class="key">loop</span>;
<span class="linenumber"> 47</span> <span class="key">end</span> Main;
</pre>
</body>
</html>
