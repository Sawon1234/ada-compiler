<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>The Ada Program: madness.adb</title>
<!-- Automatically created by 'sgml2html'. -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<style type="text/css">
  .key         {font-weight:bold; color:#228B22;}
  .comment     {font-style:oblique; font-weight:bold; color:#BB1212;}
  .linenumber  {font-size:75%;    color:#888888;}
  .string      {color:#3333CC;}
  .char        {color:#3333CC;}
  .number      {color:#3333CC;}
  .predefined  {color:#3333CC;}
</style>
</head>
<body>
<h1>The Ada Program: madness.adb</h1>
<pre>
<span class="linenumber">  1</span> <span class="comment">-- From Barnes, page 141</span>
<span class="linenumber">  2</span> <span class="comment">--The following sequence of events happen.</span>
<span class="linenumber">  3</span> <span class="comment">--* Procedure P.F is called.</span>
<span class="linenumber">  4</span> <span class="comment">--* Procedure  G is called.</span>
<span class="linenumber">  5</span> <span class="comment">--* Procedure P.H is called.</span>
<span class="linenumber">  6</span> <span class="comment">--* The exception E is raised by P.H.</span>
<span class="linenumber">  7</span> <span class="comment">--* P.H has no handler.</span>
<span class="linenumber">  8</span> <span class="comment">--* Procedure G catchs the exception with others clause.</span>
<span class="linenumber">  9</span> <span class="comment">--* Procedure G reraises E anonymously.</span>
<span class="linenumber"> 10</span> <span class="comment">--* Procedure F catchs the exception and prints "Got it!".</span>
<span class="linenumber"> 11</span> 
<span class="linenumber"> 12</span> <span class="key">with</span> <a href="http://www.adahome.com/rm95/rm9x-A-10-01.html">Ada.Text_IO</a>, <a href="http://www.adahome.com/rm95/rm9x-A-10-08.html#20">Ada.Integer_Text_IO</a>;
<span class="linenumber"> 13</span> <span class="key">use</span> Ada;
<span class="linenumber"> 14</span> 
<span class="linenumber"> 15</span> <span class="key">procedure</span> Madness <span class="key">is</span>
<span class="linenumber"> 16</span> 
<span class="linenumber"> 17</span>    <span class="key">package</span> P <span class="key">is</span>         <span class="comment">--  specification of package P</span>
<span class="linenumber"> 18</span>       <span class="key">procedure</span> F;
<span class="linenumber"> 19</span>       <span class="key">procedure</span> H;
<span class="linenumber"> 20</span>    <span class="key">end</span> P;
<span class="linenumber"> 21</span> 
<span class="linenumber"> 22</span>    <span class="key">procedure</span> G <span class="key">is</span>
<span class="linenumber"> 23</span>    <span class="key">begin</span>
<span class="linenumber"> 24</span>       P.H;
<span class="linenumber"> 25</span>    <span class="key">exception</span>
<span class="linenumber"> 26</span>       <span class="key">when</span> <span class="key">others</span> =&#62; <span class="key">raise</span>;
<span class="linenumber"> 27</span>    <span class="key">end</span> G;
<span class="linenumber"> 28</span> 
<span class="linenumber"> 29</span>    <span class="key">package</span> <span class="key">body</span> P <span class="key">is</span>    <span class="comment">--  implementation of package P</span>
<span class="linenumber"> 30</span>       E : <span class="key">exception</span>;    <span class="comment">--  scope of E is only P</span>
<span class="linenumber"> 31</span>       <span class="key">procedure</span> F <span class="key">is</span>
<span class="linenumber"> 32</span>       <span class="key">begin</span>
<span class="linenumber"> 33</span>          G;
<span class="linenumber"> 34</span>       <span class="key">exception</span>
<span class="linenumber"> 35</span>          <span class="key">when</span> E =&#62; Text_IO.Put (<span class="string">"Got it!"</span>);
<span class="linenumber"> 36</span>       <span class="key">end</span> F;
<span class="linenumber"> 37</span>       <span class="key">procedure</span> H <span class="key">is</span>     <span class="comment">--  proc H just raises E</span>
<span class="linenumber"> 38</span>       <span class="key">begin</span>
<span class="linenumber"> 39</span>          <span class="key">raise</span> E;
<span class="linenumber"> 40</span>       <span class="key">end</span> H;
<span class="linenumber"> 41</span>    <span class="key">end</span> P;
<span class="linenumber"> 42</span> 
<span class="linenumber"> 43</span> <span class="key">begin</span>
<span class="linenumber"> 44</span>    P.F;
<span class="linenumber"> 45</span> <span class="key">end</span> Madness;
</pre>
</body>
</html>
