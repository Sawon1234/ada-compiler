<html>
<head>
<title>The Ada Program: pasta-ov.adb</title>
<!-- Automatically created by 'sgml2html'. -->
</head>
<body>
<h1>The Ada Program: pasta-ov.adb</h1>
<pre>
<font size=-1>  1</font> <b><font color=#228B22>with</font></b> Text_IO, Direct_IO;
<font size=-1>  2</font> <b><font color=#228B22>procedure</font></b> Pasta <b><font color=#228B22>is</font></b>
<font size=-1>  3</font> 
<font size=-1>  4</font> <b><i><font color=#BB1212>-- This program maintains the warehouse inventory of different pasta varieties.</font></i></b>
<font size=-1>  5</font> 
<font size=-1>  6</font>    <b><i><font color=#BB1212>-- Type for the different transactions</font></i></b>
<font size=-1>  7</font>    <b><font color=#228B22>type</font></b> Transaction_Type <b><font color=#228B22>is</font></b> (Sale, Shipment, New_Pasta, Amount, Total, Done);
<font size=-1>  8</font> 
<font size=-1>  9</font>    <b><i><font color=#BB1212>-- Types for pasta amounts</font></i></b>
<font size=-1> 10</font>    <b><font color=#228B22>subtype</font></b> Warehouse_Pounds <b><font color=#228B22>is</font></b> <font color=#8B008B>Float</font> <b><font color=#228B22>range</font></b> <font color=#008B8B>0.0</font>..<font color=#008B8B>20_000</font>.<font color=#008B8B>0</font>;
<font size=-1> 11</font>    <b><font color=#228B22>subtype</font></b> Shipping_Pounds  <b><font color=#228B22>is</font></b> <font color=#8B008B>Float</font> <b><font color=#228B22>range</font></b> <font color=#008B8B>1.0</font>.. <font color=#008B8B>2_000</font>.<font color=#008B8B>0</font>;
<font size=-1> 12</font> 
<font size=-1> 13</font>    <b><font color=#228B22>procedure</font></b> Prepare_File (Pasta_File : <b><font color=#228B22>in</font></b> <b><font color=#228B22>out</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 14</font>    <b><font color=#228B22>procedure</font></b> Get_Transaction (Transaction : <b><font color=#228B22>out</font></b> Transaction_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 15</font>    <b><font color=#228B22>procedure</font></b> Process_Transaction
<font size=-1> 16</font>          (Which_Transaction : <b><font color=#228B22>in</font></b>     Transaction_Type;      <b><i><font color=#BB1212>-- Which kind</font></i></b>
<font size=-1> 17</font>           Inventory_File    : <b><font color=#228B22>in</font></b> <b><font color=#228B22>out</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b> <b><i><font color=#BB1212>-- Inventory file</font></i></b>
<font size=-1> 18</font> 
<font size=-1> 19</font>       <b><font color=#228B22>procedure</font></b> Get_Pasta_ID
<font size=-1> 20</font>             (Max_Value    : <b><font color=#228B22>in</font></b>  <font color=#8B008B>Natural</font>;     <b><i><font color=#BB1212>-- The largest possible ID</font></i></b>
<font size=-1> 21</font>              Pasta_Number : <b><font color=#228B22>out</font></b> <font color=#8B008B>Natural</font>) <b><font color=#228B22>is</font></b>  <b><i><font color=#BB1212>-- The ID of the desired pasta</font></i></b>
<font size=-1> 22</font> 
<font size=-1> 23</font>       <b><font color=#228B22>procedure</font></b> Get_Pounds (Amount : <b><font color=#228B22>out</font></b> Shipping_Pounds) <b><font color=#228B22>is</font></b>
<font size=-1> 24</font>       <b><font color=#228B22>procedure</font></b> Process_Sale (Pasta_File : <b><font color=#228B22>in</font></b> <b><font color=#228B22>out</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 25</font>       <b><font color=#228B22>procedure</font></b> Process_Shipment (Pasta_File : <b><font color=#228B22>in</font></b> <b><font color=#228B22>out</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 26</font>       <b><font color=#228B22>procedure</font></b> Process_New (Pasta_File : <b><font color=#228B22>in</font></b> <b><font color=#228B22>out</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 27</font>       <b><font color=#228B22>procedure</font></b> Process_Amount_Query (Pasta_File : <b><font color=#228B22>in</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 28</font>       <b><font color=#228B22>procedure</font></b> Process_Total_Query (Pasta_File : <b><font color=#228B22>in</font></b> Pasta_IO.File_Type) <b><font color=#228B22>is</font></b>
<font size=-1> 29</font> 
<font size=-1> 30</font>    Transaction : Transaction_Type;    <b><i><font color=#BB1212>-- Type of transaction being processed</font></i></b>
<font size=-1> 31</font>    Pasta_File  : Pasta_IO.File_Type;  <b><i><font color=#BB1212>-- Pasta inventory totals</font></i></b>
<font size=-1> 32</font> 
<font size=-1> 33</font> <b><font color=#228B22>begin</font></b>  <b><i><font color=#BB1212>-- Program Pasta</font></i></b>
<font size=-1> 34</font>    Prepare_File (Pasta_File);
<font size=-1> 35</font>    Transaction_Loop:  <b><i><font color=#BB1212>-- Each iteration, one transaction is processed</font></i></b>
<font size=-1> 36</font>    <b><font color=#228B22>loop</font></b>
<font size=-1> 37</font>       Get_Transaction (Transaction);
<font size=-1> 38</font>       <b><font color=#228B22>exit</font></b> Transaction_Loop <b><font color=#228B22>when</font></b> Transaction = Done;
<font size=-1> 39</font>       Process_Transaction (Which_Transaction =&#62; Transaction,
<font size=-1> 40</font>                            Inventory_File    =&#62; Pasta_File);
<font size=-1> 41</font>    <b><font color=#228B22>end</font></b> <b><font color=#228B22>loop</font></b> Transaction_Loop;
<font size=-1> 42</font>    Pasta_IO.Close (Pasta_File);
<font size=-1> 43</font> 
<font size=-1> 44</font> <b><font color=#228B22>exception</font></b>
<font size=-1> 45</font>    <b><font color=#228B22>when</font></b> <b><font color=#228B22>others</font></b> =&#62;                   <b><i><font color=#BB1212>-- If any exception is not handled where</font></i></b>
<font size=-1> 46</font>       Pasta_IO.Close (Pasta_File);  <b><i><font color=#BB1212>-- it occurs, close the file and propogate</font></i></b>
<font size=-1> 47</font>       <b><font color=#228B22>raise</font></b>;                        <b><i><font color=#BB1212>-- the exception back to the system.</font></i></b>
<font size=-1> 48</font> <b><font color=#228B22>end</font></b> Pasta;
</pre>
</body>
</html>
